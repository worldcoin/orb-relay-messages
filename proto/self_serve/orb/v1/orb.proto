syntax = "proto3";

package self_serve.orb.v1;

enum OrbMode {
  ORB_MODE_UNSPECIFIED = 0;
  LEGACY = 1;
  SELF_SERVE = 2;
}

enum OrbType {
  ORB_TYPE_UNSPECIFIED = 0;
  PEARL = 1;
  DIAMOND = 2;
}

message NoState {}
message SelfServeStatus {
  bool is_self_serve_enabled = 1;
}
message AnnounceOrbId {
  string orb_id = 1;
  OrbType orb_type = 2;
  OrbMode orb_mode = 3;
}
message CaptureStarted {}
message CaptureTriggerTimeout {}
message CaptureEnded {
  enum FailureFeedbackType {
    UNKNOWN = 0;
    FACE_OCCLUSION_OR_POOR_LIGHTING = 1;
    TOO_FAR = 2;
    TOO_CLOSE = 3;
    EYES_OCCLUSION = 4;
  }

  bool success = 1;
  repeated FailureFeedbackType failure_feedback = 2;
}
message SignupEnded {
  enum FailureFeedbackType {
    UNKNOWN = 0;
    CONTACT_LENSES = 1;
    EYE_GLASSES = 2;
    MASK = 3;
    FACE_OCCLUSION = 4;
    MULTIPLE_FACES = 5;
    EYES_OCCLUSION = 6;
    HEAD_POSE = 7;
    UNDERAGED = 8;
    SERVER_ERROR = 9;
  }

  bool success = 1;
  repeated FailureFeedbackType failure_feedback = 2;
}
message AgeVerificationRequiredFromOperator {}
